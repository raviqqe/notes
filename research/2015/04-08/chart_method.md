# チャート法

## CYK法との比較

* CYK法
  * チョムスキー標準形のみしか扱えない
  * 最終的な構文木の一部になり得ない無駄な部分木を多く生成する

* チャート法
  * 一般的な文脈自由文法規則が扱える
  * 解析過程の制御の自由度が大きい


## チャート法の特徴

* チャート(chart)と呼ばれるデータ構造を用いる
  * チャート : 頂点と弧からなる有向グラフ
    * 頂点 : 入力文中の位置
    * 弧 : 構文解析の途中状態
      * 弧の開始位置は、文法規則の左辺から導出される終端記号列の入力文における
        開始位置
      * 弧の終了位置は、文法規則の右辺のドットの入力文における位置
      * 弧はラベルと空所リスト(remainder)を持つ
        * ラベルは文法規則の左辺記号
        * 空所リストは文法規則の右辺のドットより右側にある記号のリスト
      * 活性弧 : 空所リストを持つ弧(未完成な部分木)
      * 不活性弧 : 空所リストを持たない弧(完成した部分木)
* 完成した部分木と未完成な部分木の両方をチャートに記録


## チャート法の解析手順

* チャート法は、活性弧がその空所と同じラベルを持つ不活性弧と結合して、
  新しい弧を生成することを繰り返す
* 最終的に文法の開始記号をラベルに持ち、入力分全体に貼る不活性弧ができれば
  構文解析が成功
* 新しく作成された弧は、すぐにチャートに組み込むのではなく、待機弧リスト
  (pending edge list)に蓄積
* 待機弧リストから次に組み込むべき弧を選択する方法を変更することにより、
  トップダウン/ボトムアップ、縦型/横型など、様々な構文解析戦略を実現できる
* チャート法は、CYK法のような個別のアルゴリズムではなく、様々な構文解析
  アルゴリズムを実現するための一般的な枠組み(アルゴリズムスキーマと呼ばれる)


### チャート法のアルゴリズム

1. チャートの初期化
  * 終端記号に対応する不活性弧を待機弧リストに登録
  * トップダウン解析のときは、さらに、文法の開始記号ラベルとする活性弧を
    待機弧リストの先頭に登録
2. 解析の停止
  1. 弧の選択
    * 待機弧リストから弧を取り出し、チャートへ追加する
  2. 弧の結合
    * もし、それが活性弧ならば、その右側の不活性弧と結合を試みる
    * もし、それが不活性弧ならば、その左側の活性弧と結合を試みる
      * 結合の条件は、活性弧の空所リストの第1要素と不活性弧のラベルが
        一致すること
  3. この登録
    * 結合が成功し、かつ、その弧と同じものがチャート及び待機弧リストの中に
      なければ、待機弧リストに登録する
  4a. 活性弧の提案(トップダウン解析)
    * 現在の弧が活性弧ならば、この活性弧
